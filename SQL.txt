CREATE TABLE [dbo].[Users] (
    [UserId]           INT            IDENTITY (1, 1) NOT NULL,
    [Username]         NVARCHAR (50)  NOT NULL,
    [Password]         NVARCHAR (MAX) NOT NULL,
    [FirstName]        NVARCHAR (100) NULL,
    [LastName]         NVARCHAR (100) NULL,
    [CountryId]        INT            NULL,
    [DateOfBirth]      DATETIME       NULL,
    [RegistrationDate] DATETIME       DEFAULT (getdate()) NOT NULL,
    [Email]            NVARCHAR (50)  NOT NULL,
    [IsActive]         BIT            DEFAULT ((1)) NOT NULL,
    [MailVerified]     BIT            DEFAULT ((0)) NOT NULL,
    [VerificationCode] NVARCHAR(MAX) NULL, 
    [VerificationDate] DATETIME NULL, 
    PRIMARY KEY CLUSTERED ([UserId] ASC),
    CONSTRAINT [Unique_Mail] UNIQUE NONCLUSTERED ([Email] ASC),
    CONSTRAINT [Unique_Username] UNIQUE NONCLUSTERED ([Username] ASC),
    CONSTRAINT [FK_User_Country] FOREIGN KEY ([CountryId]) REFERENCES [dbo].[Countries] ([Id])
);



CREATE TABLE [dbo].[Questions] (
    [Id]         INT           IDENTITY (1, 1) NOT NULL,
    [Name]       VARCHAR (255) NOT NULL,
    [Weight]     INT           DEFAULT ((0)) NOT NULL,
    [IsActive]   BIT           DEFAULT ((1)) NOT NULL,
    [CreatorId]  INT           NOT NULL,
    [CreateDate] DATETIME      DEFAULT (getdate()) NOT NULL,
    [IsApproved] BIT           DEFAULT ((0)) NOT NULL,
    [Positive]   INT           DEFAULT ((0)) NOT NULL,
    [Negative]   INT           DEFAULT ((0)) NOT NULL,
    [IsComplex]  BIT           DEFAULT ((1)) NOT NULL,
    PRIMARY KEY CLUSTERED ([Id] ASC),
    CONSTRAINT [Unique_Name] UNIQUE NONCLUSTERED ([Name] ASC),
    CONSTRAINT [FK_Creator_User] FOREIGN KEY ([CreatorId]) REFERENCES [dbo].[Users] ([UserId]),
    CONSTRAINT [Check_Weight] CHECK ([Weight]>(0) AND [Weight]<=(10))
);

